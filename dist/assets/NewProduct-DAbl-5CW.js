import{A as N,X as w,j as e}from"./index-DI8Lomad.js";import{r as a}from"./react-BbaTowL1.js";import{A as C}from"./AdminSidebar-DnWKxm2A.js";import{u as P}from"./redux-BaaShjVO.js";import{r as q}from"./features-D8KFa1sJ.js";import{A as D}from"./index-Ci1zFXAS.js";import"./firebase-DTxrvWAw.js";import"./index-67BwcfBo.js";import"./index-D6AXLMh1.js";const M=()=>{const m=N(),{user:i}=P(t=>t.userReducer),[d,u]=a.useState(!1),[o,h]=a.useState(""),[n,x]=a.useState(""),[c,g]=a.useState(1e3),[l,j]=a.useState(1),[p,v]=a.useState(""),[f]=w(),s=D("multiple",10,5),b=async t=>{t.preventDefault(),u(!0);try{if(!o||!c||l<0||!n)return;const r=new FormData;r.set("name",o),r.set("description",p),r.set("price",c.toString()),r.set("stock",l.toString()),r.set("category",n),s.file.forEach(S=>{r.append("photos",S)});const y=await f({id:(i==null?void 0:i._id)||"",formData:r});q(y,m,"/admin/products")}catch(r){console.log(r)}finally{u(!1)}};return e.jsxs("div",{className:"admin-container",children:[e.jsx(C,{}),e.jsx("main",{className:"management-section",children:e.jsx("article",{children:e.jsxs("form",{onSubmit:b,children:[e.jsx("h2",{children:"New Product"}),e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx("input",{required:!0,type:"text",placeholder:"Name",value:o,onChange:t=>h(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{required:!0,placeholder:"Description",value:p,onChange:t=>v(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Price"}),e.jsx("input",{required:!0,type:"number",placeholder:"Price",value:c,onChange:t=>g(Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Stock"}),e.jsx("input",{required:!0,type:"number",placeholder:"Stock",value:l,onChange:t=>j(Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Category"}),e.jsx("input",{required:!0,type:"text",placeholder:"eg. laptop, camera etc",value:n,onChange:t=>x(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Photos"}),e.jsx("input",{required:!0,type:"file",accept:"image/*",multiple:!0,onChange:s.changeHandler})]}),s.error&&e.jsx("p",{children:s.error}),e.jsx("div",{style:{display:"flex",gap:"1rem",overflowX:"auto"},children:s.preview&&s.preview.map((t,r)=>e.jsx("img",{style:{width:100,height:100,objectFit:"cover"},src:t,alt:"New Image"},r))}),e.jsx("button",{disabled:d,type:"submit",children:d?"Uploading product...":"Create"})]})})})]})};export{M as default};
