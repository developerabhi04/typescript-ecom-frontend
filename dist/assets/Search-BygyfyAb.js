import{c as N,d as E,e as _,_ as o,j as r,S as Q,b as w}from"./index-DI8Lomad.js";import{r as t}from"./react-BbaTowL1.js";import{P as A}from"./ProductCard-B1rFaalW.js";import{y as H}from"./redux-BaaShjVO.js";import"./firebase-DTxrvWAw.js";import"./features-D8KFa1sJ.js";const q=()=>{const u=N()[0],p=H(),{data:c,isLoading:x,isError:g,error:j}=E(""),[n,m]=t.useState(""),[d,v]=t.useState(""),[i,P]=t.useState(3e5),[l,S]=t.useState(u.get("category")||""),[a,h]=t.useState(1),{isLoading:C,data:s,isError:y,error:f}=_({search:n,sort:d,category:l,page:a,price:i}),L=e=>{if(e.stock<1)return o.error("Out Of Stock");p(w(e)),o.success("Added to cart")},b=a>1,k=a<4;if(g){const e=j;o.error(e.data.message)}if(y){const e=f;o.error(e.data.message)}return r.jsxs("div",{className:"product-search-page",children:[r.jsxs("aside",{children:[r.jsx("h2",{children:"Filter"}),r.jsxs("div",{children:[r.jsx("h2",{children:"Sort"}),r.jsxs("select",{value:d,onChange:e=>v(e.target.value),children:[r.jsx("option",{value:"",children:"None"}),r.jsx("option",{value:"asc",children:"Price (Low to High)"}),r.jsx("option",{value:"dsc",children:"Price (High to Low)"})]})]}),r.jsxs("div",{children:[r.jsxs("h2",{children:["Max Price: â‚¹",i||""]}),r.jsx("input",{type:"range",min:500,max:3e5,value:i,onChange:e=>P(Number(e.target.value))})]}),r.jsxs("div",{children:[r.jsx("h2",{children:"Category"}),r.jsxs("select",{value:l,onChange:e=>S(e.target.value),children:[r.jsx("option",{value:"",children:"ALL"}),!x&&(c==null?void 0:c.categories.map(e=>r.jsx("option",{value:e,children:e.toUpperCase()},e)))]})]})]}),r.jsxs("main",{children:[r.jsx("h1",{children:"Products"}),r.jsx("input",{type:"text",placeholder:"Search by Name",value:n,onChange:e=>m(e.target.value)}),C?r.jsx(Q,{length:10}):r.jsx("div",{className:"search-product-list",children:s==null?void 0:s.products.map(e=>r.jsx(A,{productId:e._id,name:e.name,price:e.price,stock:e.stock,handler:L,photos:e.photos},e._id))}),s&&s.totalPage>1&&r.jsxs("article",{children:[r.jsx("button",{disabled:!b,onClick:()=>h(e=>e-1),children:"Prev"}),r.jsxs("span",{children:[a," of ",s.totalPage]}),r.jsx("button",{disabled:!k,onClick:()=>h(e=>e+1),children:"Next"})]})]})]})};export{q as default};
