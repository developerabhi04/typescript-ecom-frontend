import{k as C,A as S,a0 as U,a1 as A,a2 as E,j as e,S as N,t as I}from"./index-DI8Lomad.js";import{A as L}from"./AdminSidebar-DnWKxm2A.js";import{r as n}from"./react-BbaTowL1.js";import{u as M}from"./redux-BaaShjVO.js";import{r as m}from"./features-D8KFa1sJ.js";import"./firebase-DTxrvWAw.js";import"./index-67BwcfBo.js";import"./index-D6AXLMh1.js";const B=()=>{const{user:s}=M(t=>t.userReducer),x=C(),r=S(),{isLoading:h,data:o,isError:g,error:j}=U(x.id);console.log(o==null?void 0:o.coupon);const[i,c]=n.useState(""),[u,d]=n.useState(0),[l,p]=n.useState(!1),[f]=A(),[b]=E();n.useEffect(()=>{o&&o.coupon&&(c(o.coupon.code),d(o.coupon.amount))},[o]);const D=async t=>{t.preventDefault(),p(!0);try{const a={code:i,amount:u.toString()};if(s&&(o!=null&&o.coupon)){const y=await f({couponData:a,userId:s._id,couponId:o.coupon._id});m(y,r,"/admin/discount")}}catch(a){console.log(a)}finally{p(!1)}},v=async()=>{if(s&&(o!=null&&o.coupon)){const t=await b({userId:s._id,couponId:o.coupon._id});m(t,r,"/admin/discount")}};return g?(console.error("Error fetching coupon details:",j),e.jsx("p",{children:"Error fetching coupon details. Please try again later."})):e.jsxs("div",{className:"admin-container",children:[e.jsx(L,{}),h?e.jsx(N,{}):e.jsx(e.Fragment,{children:e.jsx("main",{className:"management-section",children:e.jsxs("article",{children:[e.jsx("button",{className:"product-delete-btn",onClick:v,children:e.jsx(I,{})}),e.jsxs("form",{onSubmit:D,children:[e.jsx("h2",{children:"Manage Discount"}),e.jsxs("div",{children:[e.jsx("label",{children:"Coupon Code"}),e.jsx("input",{type:"text",placeholder:"Coupon Code",value:i,onChange:t=>c(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Amount"}),e.jsx("input",{type:"number",placeholder:"Amount",value:u,onChange:t=>d(Number(t.target.value))})]}),e.jsx("button",{disabled:l,type:"submit",children:l?"Updating...":"Update"})]})]})})})]})};export{B as default};
